<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å ±åˆ°ç³»çµ± | ä½³é‡Œå¥‡ç¾é†«é™¢114å¹´åº¦é¤æ•˜</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    font-family:'Noto Sans TC',sans-serif;
    margin:0; padding:0;
    min-height:100vh;
    overflow-x:hidden;
    background: linear-gradient(135deg,#E6E6FA,#FFFFFF);
    position: relative;
}
/* æ¼‚æµ®æ³¡æ³¡ */
.bubble {
    position:absolute;
    border-radius:50%;
    opacity:0.4;
    pointer-events:none;
    z-index:0;
}
/* å°è¦½åˆ— */
.navbar {
    background: rgba(10,10,10,0.85);
    backdrop-filter: blur(10px);
    z-index:10;
}
.navbar-brand, .navbar-nav .nav-link { color:#D8BFD8 !important; font-weight:700; }
.navbar-nav .nav-link:hover, .navbar-nav .nav-link.active { color:#9370DB !important; }

/* å¡ç‰‡ */
.card {
    background: rgba(255,255,255,0.85);
    border-radius:15px;
    padding:25px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
    margin-bottom:40px;
    position:relative;
    z-index:1;
}
/* è¡¨æ ¼ */
#checkinTable {
    width:100%;
    border-collapse: collapse;
}
#checkinTable th, #checkinTable td {
    padding:10px;
    border:1px solid #ccc;
}
#checkinTable tr.checked-in {
    background-color: #D8BFD8;
    color:#000;
}
/* æŒ‰éˆ• */
.refresh-btn {
    background: linear-gradient(90deg,#4B0082,#7B68EE);
    color:#fff;
    border:none;
    font-weight:600;
    border-radius:10px;
    padding:10px 25px;
    transition:0.3s;
}
.refresh-btn:hover {
    background: linear-gradient(90deg,#7B68EE,#9370DB);
    transform:scale(1.05);
}
main.container {position:relative; z-index:2; padding-top:100px; padding-bottom:50px;}
footer { text-align:center; color:#555; background: rgba(255,255,255,0.1); padding:15px; font-size:0.95rem; margin-top:60px; position:relative; z-index:1; }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
<div class="container">
<a class="navbar-brand" href="index.html">ä½³é‡Œå¥‡ç¾é†«é™¢114å¹´åº¦é¤æ•˜</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="index.html">é¦–é </a></li>
<li class="nav-item"><a class="nav-link" href="schedule.html">æ´»å‹•æµç¨‹</a></li>
<li class="nav-item"><a class="nav-link" href="teachers.html">æ•™å¸«èŠ³åéŒ„</a></li>
<li class="nav-item"><a class="nav-link active" href="checkin.html">å ±åˆ°ç³»çµ±</a></li>
<li class="nav-item"><a class="nav-link" href="survey.html">æ»¿æ„åº¦èª¿æŸ¥</a></li>
</ul>
</div>
</div>
</nav>

<main class="container">

<div class="text-center mb-5">
<h2>ğŸ“ ç·šä¸Šå ±åˆ°è¡¨å–®</h2>
<p class="text-dark">è«‹èˆ‡æœƒäººå“¡æ–¼ç¾å ´å¡«å¯«ä¸‹æ–¹è¡¨å–®å ±åˆ°</p>
</div>

<div class="card mb-4">
<form id="checkinForm">
<div class="mb-3">
<label for="name" class="form-label">å§“å</label>
<input type="text" class="form-control" id="name" required>
</div>
<div class="mb-3">
<label for="title" class="form-label">è·ç¨±</label>
<input type="text" class="form-control" id="title">
</div>
<div class="mb-3">
<label for="role" class="form-label">èº«åˆ†åˆ¥</label>
<input type="text" class="form-control" id="role">
</div>
<button type="submit" class="btn btn-primary">å ±åˆ°</button>
</form>
</div>

<div class="text-center mb-4">
<h2>âœ… å³æ™‚å ±åˆ°åå–®</h2>
<p class="text-dark">å·²å ±åˆ°è€…å°‡é«˜äº®é¡¯ç¤º</p>
<div class="d-flex justify-content-center align-items-center gap-3 mb-3">
<button class="refresh-btn" onclick="loadCheckinList()">âŸ³ é‡æ–°æ•´ç†åå–®</button>
<span id="countdown" class="timer"></span>
</div>
</div>

<div class="card mb-4">
<table id="checkinTable">
<thead>
<tr><th>äººå£«è™Ÿ</th><th>å§“å</th><th>è·ç¨±</th><th>èº«åˆ†åˆ¥</th><th>å ±åˆ°ç‹€æ…‹</th><th>å ±åˆ°æ™‚é–“</th><th>å‚™è¨»</th></tr>
</thead>
<tbody>
<!-- åå–®ç”± JS å¡«å…¥ -->
</tbody>
</table>
</div>

</main>

<footer>
Â© 2025 ä½³é‡Œå¥‡ç¾é†«é™¢ï¼æ•™å­¸ç ”ç©¶çµ„ | Designed for 114å¹´åº¦é¤æ•˜
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// --------------------------
// æ¼‚æµ®æ³¡æ³¡èƒŒæ™¯
// --------------------------
const bubbleColors=['#E6E6FA','#D8BFD8','#F0F8FF','#DDA0DD','#DA70D6','#9370DB'];
const bubbles=[];
const bubbleCount=40;
let width=window.innerWidth;
let height=window.innerHeight;

for(let i=0;i<bubbleCount;i++){
  let b=document.createElement('div');
  b.classList.add('bubble');
  let size=Math.random()*40+20;
  b.style.width=size+'px';
  b.style.height=size+'px';
  b.style.left=Math.random()*width+'px';
  b.style.top=Math.random()*height+'px';
  b.style.background=bubbleColors[Math.floor(Math.random()*bubbleColors.length)];
  document.body.appendChild(b);
  bubbles.push({el:b, x:parseFloat(b.style.left), y:parseFloat(b.style.top), dx:(Math.random()-0.5)*0.5, dy:-Math.random()*0.7-0.2});
}
function animateBubbles(){
  bubbles.forEach(b=>{
    b.x += b.dx;
    b.y += b.dy;
    if(b.y + parseFloat(b.el.style.height)<0){ b.y=height; b.x=Math.random()*width; }
    if(b.x<0) b.x=width;
    if(b.x>width) b.x=0;
    b.el.style.left=b.x+'px';
    b.el.style.top=b.y+'px';
  });
  requestAnimationFrame(animateBubbles);
}
animateBubbles();

// --------------------------
// å‰ç«¯æ¨¡æ“¬å³æ™‚å ±åˆ°
// --------------------------
const WEB_APP_URL = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE'; // å¡«å…¥ä½ çš„ Web App URL
let checkinList=[];

function loadCheckinList(){
  fetch(WEB_APP_URL)
  .then(res=>res.json())
  .then(data=>{
    checkinList = data;
    const tbody=document.querySelector('#checkinTable tbody');
    tbody.innerHTML='';
    checkinList.forEach(item=>{
      const tr=document.createElement('tr');
      if(item.status==='å·²å ±åˆ°') tr.classList.add('checked-in');
      tr.innerHTML=`<td>${item.id}</td><td>${item.name}</td><td>${item.title}</td><td>${item.role}</td><td>${item.status}</td><td>${item.time}</td><td>${item.note}</td>`;
      tbody.appendChild(tr);
    });
  })
  .catch(err=>console.error(err));
  counter=30;
}

// æäº¤å ±åˆ°
document.getElementById('checkinForm').addEventListener('submit',e=>{
  e.preventDefault();
  const id=Math.floor(Math.random()*10000);
  const name=document.getElementById('name').value;
  const title=document.getElementById('title').value;
  const role=document.getElementById('role').value;
  fetch(WEB_APP_URL,{
    method:'POST',
    body: JSON.stringify({id, name, title, role}),
  })
  .then(res=>res.json())
  .then(()=>{ loadCheckinList(); })
  .catch(err=>console.error(err));
  e.target.reset();
});

// è‡ªå‹•å€’æ•¸åˆ·æ–°
let counter=30;
const countdownEl=document.getElementById('countdown');
setInterval(()=>{
  counter--;
  if(counter<=0) loadCheckinList();
  countdownEl.textContent=`â³ ${counter} ç§’å¾Œè‡ªå‹•æ›´æ–°`;
},1000);

// åˆå§‹åŒ–è¼‰å…¥
loadCheckinList();
</script>
</body>
</html>
