<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å ±åˆ°ç³»çµ± | ä½³é‡Œå¥‡ç¾é†«é™¢114å¹´åº¦é¤æ•˜</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  font-family:'Noto Sans TC',sans-serif;
  margin:0; padding:0;
  min-height:100vh;
  overflow:hidden;
  color:#fff;
  background: linear-gradient(135deg,#E6E6FA,#FFFFFF);
  position:relative;
}

/* å°è¦½åˆ— */
.navbar {
  background: rgba(10,10,10,0.7);
  backdrop-filter: blur(10px);
  border-bottom:1px solid rgba(255,255,255,0.1);
  z-index:10;
}
.navbar-brand { color:#ffcc66 !important; font-weight:700; }
.nav-link { color:#eee !important; font-weight:500; }
.nav-link:hover,.nav-link.active { color:#ffcc66 !important; }

h2{ color:#ffcc66; font-weight:600; margin-bottom:15px; text-shadow: 1px 1px 4px rgba(0,0,0,0.3); }

.card {
  background: rgba(255,255,255,0.85);
  color:#000;
  border-radius:15px;
  padding:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.3);
  margin-bottom:40px;
  position:relative; z-index:1;
}

.refresh-btn {
  background: linear-gradient(90deg,#ffcc66,#ffd866);
  color:#000; border:none; font-weight:600; border-radius:10px;
  padding:10px 25px; transition:0.3s;
}
.refresh-btn:hover { background: linear-gradient(90deg,#ffd866,#ffee99); transform:scale(1.05); }

.timer { font-size:0.9rem; color:#7b68ee; }
main.container { position:relative; z-index:2; padding-top:100px; padding-bottom:50px; }
footer { text-align:center; color:#555; background: rgba(255,255,255,0.1); padding:15px; font-size:0.95rem; margin-top:60px; position:relative; z-index:1; }
.text-center{text-align:center;}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
<div class="container">
<a class="navbar-brand" href="index.html">ä½³é‡Œå¥‡ç¾é†«é™¢114å¹´åº¦é¤æ•˜</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="index.html">é¦–é </a></li>
<li class="nav-item"><a class="nav-link" href="schedule.html">æ´»å‹•æµç¨‹</a></li>
<li class="nav-item"><a class="nav-link" href="teachers.html">æ•™å¸«èŠ³åéŒ„</a></li>
<li class="nav-item"><a class="nav-link active" href="checkin.html">å ±åˆ°ç³»çµ±</a></li>
<li class="nav-item"><a class="nav-link" href="survey.html">æ»¿æ„åº¦èª¿æŸ¥</a></li>
</ul>
</div>
</div>
</nav>

<main class="container">

<div class="text-center mb-5">
<h2>ğŸ“ ç·šä¸Šå ±åˆ°è¡¨å–®</h2>
<p class="text-dark">è«‹æƒææˆ–é»æ“Šä¸‹æ–¹è¡¨å–®å ±åˆ°</p>
</div>
<div class="card">
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLScfRD9jGQfE1KKhZL-e5GbQxMqrxF_jUktrbTq1ZPX-aTYYuA/viewform?embedded=true" style="width:100%; height:600px; border:none; border-radius:12px;"></iframe>
</div>

<div class="text-center mb-4">
<h2>âœ… å³æ™‚å ±åˆ°çµ±è¨ˆ</h2>
<p class="text-dark">å·²å ±åˆ°äººæ•¸é€²åº¦</p>
<div class="mb-3">
<canvas id="checkinChart" width="200" height="200"></canvas>
</div>
<button class="refresh-btn" onclick="refreshChart()">âŸ³ é‡æ–°æ•´ç†çµ±è¨ˆ</button>
<span id="countdown" class="timer"></span>
</div>

</main>

<footer>
Â© 2025 ä½³é‡Œå¥‡ç¾é†«é™¢ï¼æ•™å­¸ç ”ç©¶çµ„ | Designed for 114å¹´åº¦é¤æ•˜
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// -------------------------
// å‹•æ…‹æ°£æ³¡
// -------------------------
const bubbleColors=['#E6E6FA','#F0F8FF','#D8BFD8','#FFF','#FFE4E1','#ADD8E6'];
const bubbles=[];
const bubbleCount=40;
const width=window.innerWidth;
const height=window.innerHeight;

for(let i=0;i<bubbleCount;i++){
  let b=document.createElement('div');
  b.style.position='absolute';
  b.style.borderRadius='50%';
  let size=Math.random()*50+10;
  b.style.width=size+'px';
  b.style.height=size+'px';
  b.style.background=bubbleColors[Math.floor(Math.random()*bubbleColors.length)];
  b.style.opacity=0.5;
  b.style.left=Math.random()*width+'px';
  b.style.top=Math.random()*height+'px';
  document.body.appendChild(b);
  bubbles.push({
    el:b,
    x:parseFloat(b.style.left),
    y:parseFloat(b.style.top),
    size:size,
    dx:(Math.random()-0.5)*0.5,  // æ°´å¹³é€Ÿåº¦
    dy:-Math.random()*0.5-0.2,   // å‚ç›´é€Ÿåº¦
    colorIndex:Math.floor(Math.random()*bubbleColors.length)
  });

  // æ»‘é¼ äº’å‹•æ”¾å¤§
  b.addEventListener('mousemove',()=>{b.style.transform='scale(1.3)';});
  b.addEventListener('mouseleave',()=>{b.style.transform='scale(1)';});
}

// å‹•æ…‹æ›´æ–°æ°£æ³¡ä½ç½®
function animateBubbles(){
  bubbles.forEach(b=>{
    b.x += b.dx;
    b.y += b.dy;
    if(b.y + b.size < 0){ // è¶…å‡ºé ‚éƒ¨é‡ç”Ÿ
      b.y = height;
      b.x = Math.random()*width;
    }
    if(b.x < 0) b.x = width;
    if(b.x > width) b.x = 0;
    b.el.style.left=b.x+'px';
    b.el.style.top=b.y+'px';
  });
  requestAnimationFrame(animateBubbles);
}
animateBubbles();

// é¡è‰²æ¼¸è®Š
setInterval(()=>{
  bubbles.forEach(b=>{
    b.colorIndex=(b.colorIndex+1)%bubbleColors.length;
    b.el.style.background=bubbleColors[b.colorIndex];
  });
},4000);

// -------------------------
// æ¨¡æ“¬å ±åˆ°çµ±è¨ˆ
// -------------------------
let checkinCount=15;
let totalCount=50;
const ctx=document.getElementById('checkinChart').getContext('2d');
let chart=new Chart(ctx,{
  type:'doughnut',
  data:{
    labels:['å·²å ±åˆ°','æœªå ±åˆ°'],
    datasets:[{data:[checkinCount,totalCount-checkinCount], backgroundColor:['#FFCC66','#87CEFA'], borderWidth:0}]
  },
  options:{
    cutout:'70%',
    plugins:{legend:{display:false}, tooltip:{enabled:true}},
    animation:{animateRotate:true, animateScale:true}
  }
});

function refreshChart(){
  checkinCount=Math.floor(Math.random()*totalCount);
  chart.data.datasets[0].data=[checkinCount,totalCount-checkinCount];
  chart.update();
  counter=30;
}

// è‡ªå‹•å€’æ•¸åˆ·æ–°
const countdownEl=document.getElementById('countdown');
let counter=30;
setInterval(()=>{
  counter--;
  if(counter<=0) refreshChart();
  countdownEl.textContent=`â³ ${counter} ç§’å¾Œè‡ªå‹•æ›´æ–°`;
},1000);
</script>
</body>
</html>
